# Snippet for creating identity types

Create your identity type with ``newid.snippet``.

The snippet has two parameters:

- ``$classname$``: name of the model, e.g. User or Product. The struct type is the class name with the "Id" suffix e.g. ``UserId``, ``ProductId``
- ``$type$``: the type of the underlying identity value. ``int``, ``string``, ``Guid``, whatever.

## Features

- **Immutable** - as structs should be.
- **Operator overloading** - comparison operators ``==`` and ``!=`` are handled.
- **Custom underlying type** - choose ``string``, ``int``, ``Guid``, whatever and it will work, even with a nullable types such as string.
- **``IComparable``** - identities are compared using the underlying type.
- **``IEquatable``** - identities are equal if their underlying types are equal.
- **Support for nullable identities**  
  The generated struct can be compared with other nullable struct of same type.
- **Forbidden null underlying value**  
  If you choose a nullable underlying type such as string, the constructor then throws exception on ``null`` values.

## Note on using ``null`` identities

Whether you want to use nullable identities depends on how you wish to work with them in your code.

Usually you'd have a business model like this:

```csharp
public class Product
{
    //ProductId is a struct type generated by the newid snippet.
    public ProductId Id { get; set; }

    // ...some other properties
}
```

If your data layer generates Ids automatically for you (e.g. some kind of auto increment functionality) then you may want to set the Id property to the ``default`` of the underlying type, e.g. ``new ProductId(default(int))`` since the property is ignored in your data layer anyway.

```csharp
public class Product
{
    //ProductId is a struct type generated by the newid snippet.
    public ProductId? Id { get; set; }

    // ...some other properties
}
```

In the example above, the ``Id`` property is nullable. I don't recommend this approach more since it's not very clear what the entity being null represents. The property being null should really be used only for properties where you want to express its optionality.
